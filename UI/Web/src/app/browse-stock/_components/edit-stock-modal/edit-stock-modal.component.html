<ng-container *transloco="let t; prefix: 'edit-stock-modal'">
  <div class="modal-container">
    <div class="modal-header">
      <h5 class="modal-title">{{t('title', {name: stock().name})}}</h5>
      <button type="button" class="btn-close" [attr.aria-label]="t('close')" (click)="close()">
      </button>
    </div>

    <div class="modal-body scrollable-modal">

      <form [formGroup]="stockForm" class="stock-form">

        <div class="row g-0 mb-2">
          <div class="col-md-12 col-sm-12 mt-2">
            @if (stockForm.get('name'); as control) {
              <app-settings-item [control]="control" [title]="t('name-label')" [subtitle]="t('name-tooltip')">
                <ng-template #view>
                  {{control.value}}
                </ng-template>
                <ng-template #edit>
                  <input formControlName="name" type="text" class="form-control" id="form-control-name">
                </ng-template>
              </app-settings-item>
            }
          </div>

          <div class="col-md-12 col-sm-12 mt-2">
            @if (stockForm.get('description'); as control) {
              <app-settings-item [control]="control" [title]="t('description-label')" [subtitle]="t('description-tooltip')">
                <ng-template #view>
                  {{control.value | defaultValue}}
                </ng-template>
                <ng-template #edit>
                  <textarea formControlName="description" type="text" class="form-control" id="form-control-description"></textarea>
                </ng-template>
              </app-settings-item>
            }
          </div>

          <div class="col-md-12 col-sm-12 mt-2">
            @if (stockForm.get('product'); as control) {
              <app-settings-item [control]="control" [title]="t('product-label')" [subtitle]="t('product-tooltip')" [canEdit]="false" [showEdit]="false">
                <ng-template #view>
                  <app-type-ahead [settings]="productTypeaheadSettings" (selectedData)="onItemSelect($event)" />
                </ng-template>
              </app-settings-item>
            }
          </div>
        </div>

      </form>

    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="close()">
        {{t('cancel')}}
      </button>
      <button type="button" class="btn btn-olive" (click)="save()" [disabled]="saving() || !stockForm.valid">
        @if (saving()) {
          <app-loading-spinner />
        }
        <span>{{ !saving() ? t('save') : t('saving')}}</span>
      </button>
    </div>
  </div>
</ng-container>
