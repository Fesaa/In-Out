<div class="management-dashboard" *transloco="let t;">
  <header class="mobile-header d-lg-none">
    <button
      class="btn btn-link sidebar-toggle"
      (click)="toggleSidebar()"
      aria-label="Toggle navigation">
      <i class="fas fa-list"></i>
    </button>
    <h1 class="mobile-title">Management</h1>
  </header>

  <nav class="sidebar" [class.open]="sidebarOpen()">
    <div class="sidebar-header">
      <h2 class="brand">Management</h2>
      <button
        class="btn btn-link close-btn d-lg-none"
        (click)="toggleSidebar()"
        aria-label="Close navigation">
        <i class="fas fa-x"></i>
      </button>
    </div>

    <div class="sidebar-content">
      <ul class="nav-list">
        @for (item of navigationService.managementItems(); track item.id) {
          <li class="nav-item">
            <a
              href="#"
              class="nav-link"
              [class.active]="activeItem() === item.id"
              (click)="onNavItemClick(item, $event)">
              <i class="nav-icon" [class]="item.icon"></i>
              <span class="nav-text">{{ t(item.translationKey) }}</span>
            </a>
          </li>
        }
      </ul>
    </div>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="user-details">
          <span class="user-name">{{authService.userInfo()?.UserName}}</span>
          <a class="fas fa-home back" routerLink="/dashboard"></a>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content">

    <div class="content-body">

      @defer (when activeItem() === ManagementSettingsId.Overview; prefetch on idle) {
        @if (activeItem() === ManagementSettingsId.Overview) {
          <app-management-overview></app-management-overview>
        }
      }

      @defer (when activeItem() === ManagementSettingsId.Products; prefetch on idle) {
        @if (activeItem() === ManagementSettingsId.Products) {
          <app-management-products></app-management-products>
        }
      }

      @defer (when activeItem() === ManagementSettingsId.Clients; prefetch on idle) {
        @if (activeItem() === ManagementSettingsId.Clients) {
          <app-management-clients></app-management-clients>
        }
      }

      @defer (when activeItem() === ManagementSettingsId.Server; prefetch on idle) {
        @if (activeItem() === ManagementSettingsId.Server) {
          <app-management-server></app-management-server>
        }
      }

    </div>
  </main>

  <div
    class="sidebar-overlay d-lg-none"
    [class.show]="sidebarOpen()"
    (click)="toggleSidebar()">
  </div>
</div>
